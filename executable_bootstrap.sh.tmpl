#!/bin/bash
cd ~

# Common configurations

# MacOS configurations
{{- if eq .chezmoi.os "darwin" }}

# Locate the Brewfile
BREWFILE="~/.config/brew/Brewfile"

if [ -z "$BREWFILE" ]; then
  echo "Brewfile not found in the system."
  exit 1
fi

# Install packages from the Brewfile
brew bundle --file="$BREWFILE"
echo "Homebrew and packages from Brewfile installed successfully."


if [ ! -d ~/.vim ]; then
    mkdir ~/.vim
    chmod 777 ~/.vim
fi

# Add .vim undodir for undotree
if [ ! -d ~/.vim/undodir ]; then
    mkdir ~/.vim/undodir/
    chmod 777 ~/.vim/undodir/
fi

{{- end }}
